<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä¾†è³“ç°½åˆ°</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background-color: #f8f9fa; height: 100vh; display: flex; align-items: center; justify-content: center; font-family: 'Noto Sans TC', sans-serif; }
    
    /* æ‰‹æ©Ÿç‰ˆæ¨£å¼ (é è¨­) */
    .card-box { 
      background: white; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); 
      padding: 30px; width: 90%; max-width: 400px; text-align: center; 
    }
    
    /* é›»è…¦ç‰ˆæ¨£å¼ (è¢å¹•å¤§æ–¼ 768px æ™‚è§¸ç™¼) */
    @media (min-width: 768px) {
      .card-box {
        max-width: 600px; /* åŠ å¯¬å¡ç‰‡ */
      }
      h2 {
        white-space: nowrap; /* å¼·åˆ¶ä¸æ›è¡Œ */
      }
    }

    input { background: #f0f2f5; border: none; border-radius: 10px; padding: 15px; width: 100%; margin-bottom: 15px; font-size: 16px; box-sizing: border-box; }
    .btn-go { background: #000; color: white; padding: 15px; width: 100%; border-radius: 10px; font-size: 18px; font-weight: bold; border: none; cursor: pointer; }
    .btn-go:disabled { background: #999; }
    #overlay { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.95); display:none; flex-direction:column; align-items:center; justify-content:center; }
    .icon { font-size: 60px; margin-bottom: 10px; }
    
    /* æ´»å‹•åç¨±æ¨£å¼ */
    .event-title { color: #666; font-size: 1.1rem; margin-bottom: 20px; font-weight: normal; }
  </style>
</head>
<body>

<div class="card-box">
  <div class="mb-3">
     <img src="https://em-content.zobj.net/source/microsoft-teams/337/waving-hand_1f44b.png" width="50">
  </div>
  
  <h2 class="mb-2">æ­¡è¿è’è‡¨å»ºåŠŸåœ‹å°</h2>
  <div id="event-name" class="event-title"></div>

  <form id="form">
    <input type="text" id="title" placeholder="è·ç¨± (å¦‚ï¼šè‘£äº‹é•·)" required>
    <input type="text" id="name" placeholder="å§“å" required>
    <button type="submit" id="btn" class="btn-go">ç°½åˆ°</button>
  </form>
</div>

<div id="overlay">
  <div class="icon">âœ…</div>
  <h3>ç°½åˆ°æˆåŠŸ</h3>
  <p>å³å°‡è¿”å›é¦–é ...</p>
</div>

<script>
  // ğŸŸ¢ è¨­å®šå€ï¼šè«‹åœ¨é€™è£¡ä¿®æ”¹ä½ çš„æ´»å‹•åç¨±
  const EVENT_NAME = "112å­¸å¹´åº¦å®¶é•·æœƒæˆè­‰å…¸ç¦®";
  
  // ä½ çš„ GAS ç¶²å€
  const API_URL = "https://script.google.com/macros/s/AKfycbw62YC7Q03CC-YL_UyBKR4JXfP_cU3OIiswA9LlHhKLIS1LJrCg2DBT441eaE880C05BA/exec";

  // ç¨‹å¼é–‹å§‹
  document.getElementById('event-name').innerText = EVENT_NAME;

  document.getElementById('form').addEventListener('submit', function(e) {
    e.preventDefault();
    var btn = document.getElementById('btn');
    var title = document.getElementById('title').value;
    var name = document.getElementById('name').value;

    btn.textContent = "å‚³é€ä¸­...";
    btn.disabled = true;

    fetch(API_URL, {
      method: "POST",
      body: JSON.stringify({ action: "checkin", title: title, name: name })
    })
    .then(res => res.json())
    .then(data => {
      document.getElementById('overlay').style.display = 'flex';
      setTimeout(() => window.location.reload(), 2000); 
    })
    .catch(err => {
      alert("é€£ç·šæ€ªæ€ªçš„ï¼Œè«‹å†è©¦ä¸€æ¬¡");
      btn.disabled = false;
      btn.textContent = "ç°½åˆ°";
    });
  });
</script>

</body>
</html>
