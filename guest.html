<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä¾†è³“è‡ªåŠ©ç°½åˆ°</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* === å…¨åŸŸè¨­å®š (èˆ‡ä¸»æŒäººé é¢é¢¨æ ¼ä¸€è‡´) === */
    body { 
        background: #f4f4f4; 
        padding: 20px; 
        font-family: "Microsoft JhengHei", sans-serif; 
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    /* === ç°½åˆ°å¡ç‰‡ === */
    .checkin-card { 
        background: white;
        padding: 40px 30px;
        border-radius: 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.06);
        max-width: 500px;
        width: 100%;
        text-align: center;
    }

    /* === æ¨™é¡Œå€ === */
    .emoji-icon { font-size: 3rem; margin-bottom: 10px; display: block; }
    .main-title { font-size: 1.8rem; font-weight: 800; color: #333; margin-bottom: 5px; }
    .sub-title { font-size: 1.1rem; color: #666; margin-bottom: 30px; font-weight: normal; }

    /* === è¼¸å…¥æ¡†ç¾åŒ– === */
    .input-group-custom { margin-bottom: 15px; }
    .form-control-lg {
        background-color: #f0f2f5; 
        border: none; 
        border-radius: 12px; 
        padding: 15px; 
        font-size: 1.1rem; 
        text-align: center; 
    }
    .form-control-lg:focus { 
        background-color: #e4e6e9; 
        box-shadow: none; 
        outline: none; 
    }

    /* === é»‘è‰²æŒ‰éˆ• === */
    .btn-submit { 
        background: #000; 
        color: white; 
        border-radius: 12px; 
        padding: 15px; 
        font-weight: bold; 
        font-size: 1.2rem; 
        width: 100%; 
        margin-top: 20px; 
        transition: transform 0.1s;
    }
    .btn-submit:active { transform: scale(0.98); }

    /* === æˆåŠŸè¨Šæ¯ === */
    #success-msg { display: none; margin-top: 20px; color: #198754; font-weight: bold; font-size: 1.2rem; }
  </style>
</head>
<body>

  <div class="checkin-card">
    <span class="emoji-icon">ğŸ‘‹</span>
    <h1 class="main-title">æ­¡è¿è’è‡¨åŒ—å±¯å€å»ºåŠŸåœ‹å°</h1>
    <h2 class="sub-title">66é€±å¹´æ ¡æ…¶æš¨ç¤¾å€é‹å‹•æœƒ</h2>

    <div class="input-group-custom">
      <input type="text" id="input-job" class="form-control form-control-lg" placeholder="è·ç¨± (å¦‚ï¼šè‘£äº‹é•·)">
    </div>
    <div class="input-group-custom">
      <input type="text" id="input-name" class="form-control form-control-lg" placeholder="å§“å">
    </div>

    <button onclick="submitCheckIn()" class="btn btn-submit" id="btn-submit">ç°½åˆ°</button>
    
    <div id="success-msg">ğŸ‰ ç°½åˆ°æˆåŠŸï¼æ­¡è¿æ‚¨ï¼</div>
  </div>

<script>
  // âš ï¸âš ï¸âš ï¸ è«‹å‹™å¿…æ›æˆä½ æœ€æ–°çš„ GAS API ç¶²å€ âš ï¸âš ï¸âš ï¸
  const API_URL = "https://script.google.com/macros/s/AKfycbw62YC7Q03CC-YL_UyBKR4JXfP_cU3OIiswA9LlHhKLIS1LJrCg2DBT441eaE880C05BA/exec";
  
  function submitCheckIn() {
    var job = document.getElementById('input-job').value.trim();
    var name = document.getElementById('input-name').value.trim();
    var btn = document.getElementById('btn-submit');
    var msg = document.getElementById('success-msg');

    // é˜²å‘†ï¼šæ²’å¡«åå­—ä¸èƒ½é€å‡º
    if (!name) { 
        alert("è«‹è¼¸å…¥æ‚¨çš„å§“å"); 
        return; 
    }

    // UI é–å®š
    btn.disabled = true;
    btn.innerText = "è™•ç†ä¸­...";

    // å‚³é€è³‡æ–™çµ¦å¾Œç«¯ (GAS æœƒè‡ªå‹•æŠŠå®ƒæ¨™è¨˜ç‚º 'å¾…ä»‹ç´¹' ä¸¦å¯«å…¥å ±åˆ°æ™‚é–“)
    fetch(API_URL, { 
        method: "POST", 
        body: JSON.stringify({ 
            action: "checkIn", 
            title: job, 
            name: name 
        }) 
    })
    .then(res => res.json())
    .then(json => {
        if(json.status === "success") {
            // é¡¯ç¤ºæˆåŠŸå‹•ç•«
            btn.style.display = 'none';
            msg.style.display = 'block';
            
            // 2ç§’å¾Œé‡ç½®ï¼Œæ–¹ä¾¿ä¸‹ä¸€å€‹äººç°½åˆ°
            setTimeout(() => {
                document.getElementById('input-job').value = "";
                document.getElementById('input-name').value = "";
                btn.disabled = false;
                btn.innerText = "ç°½åˆ°";
                btn.style.display = 'block';
                msg.style.display = 'none';
            }, 2000);
        } else {
            alert("ç³»çµ±éŒ¯èª¤ï¼š" + json.message);
            btn.disabled = false;
            btn.innerText = "ç°½åˆ°";
        }
    })
    .catch(err => {
        alert("é€£ç·šå¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯");
        console.error(err);
        btn.disabled = false;
        btn.innerText = "ç°½åˆ°";
    });
  }
</script>

</body>
</html>
