<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>接待處報到</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    * { box-sizing: border-box; } 
    body { background: #f4f4f4; padding: 20px; font-family: "Microsoft JhengHei", sans-serif; min-height: 100vh; display: flex; flex-direction: column; }
    .container { max-width: 800px; margin: 0 auto; flex: 1; display: flex; flex-direction: column; justify-content: flex-start; }

    #login-box { display: none; } 
    
    .school-header { font-size: 1.1rem; color: #6c757d; font-weight: 700; margin-bottom: 5px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .event-main-title { font-size: clamp(1.5rem, 5vw, 2.5rem); font-weight: 800; color: #212529; text-align: center; margin: 10px 0 20px 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

    .tools-container { background: white; padding: 20px; border-radius: 16px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    .search-row { display: flex; gap: 10px; margin-bottom: 15px; }
    .search-box { border-radius: 12px; padding: 12px; border: 2px solid #eee; font-size: 1.1rem; flex: 1; }
    .search-box:focus { border-color: #212529; outline: none; }
    .btn-refresh { padding: 0 20px; border-radius: 12px; background: #212529; color: white; border: none; font-weight: bold; white-space: nowrap;}
    
    .add-area { border-top: 1px dashed #ddd; padding-top: 15px; }
    .add-label { font-weight: bold; color: #666; margin-bottom: 8px; display: block; font-size: 0.9rem; }
    .form-select { border-radius: 12px; padding: 10px; border: 2px solid #eee; }

    .section-header { 
        padding: 12px 20px; background: #e9ecef; font-weight: bold; color: #555; font-size: 1.1rem;
        display: flex; justify-content: space-between; align-items: center;
        border-left: 5px solid #666; margin-top: 20px; margin-bottom: 10px; border-radius: 0 8px 8px 0;
        cursor: pointer; transition: background 0.2s;
    }
    .section-header:hover { background: #dee2e6; }
    .section-header.pending-zone { border-left-color: #dc3545; color: #dc3545; background: #fff5f5; }
    
    .collapse-icon { transition: transform 0.3s; }
    .collapsed .collapse-icon { transform: rotate(-90deg); }

    .dash-group-title { font-size: 1rem; color: #333; margin: 10px 5px 5px 5px; font-weight: 900; border-bottom: 2px solid #eee; padding-bottom: 5px;}

    .row-card { 
        border-radius: 12px; padding: 15px 20px; margin-bottom: 10px; display: flex; align-items: center; justify-content: space-between; 
        border: none !important; box-shadow: 0 0 0 1px #e0e0e0, 0 2px 4px rgba(0,0,0,0.05); 
        background: white; min-height: 80px; transition: all 0.3s ease; 
    }
    .row-card.arrived { background: #f8f9fa; opacity: 0.6; box-shadow: none; }
    .row-card.arrived .name { text-decoration: line-through; color: #999; }

    .info { flex: 1; padding-right: 15px; }
    .job { font-size: 14px; color: #666; display: block; }
    .name { font-size: 20px; font-weight: 800; color: #000; }

    .btn-checkin { background: #dc3545; color: white; border: none; padding: 10px 25px; border-radius: 50px; font-weight: bold; min-width: 80px; transition: background 0.2s; }
    .btn-checkin:disabled { background: #999; cursor: not-allowed; }
    .btn-add { background: #212529; color: white; font-weight: bold; border-radius: 8px; }

    @media (max-width: 576px) {
        .event-main-title { font-size: 1.6rem !important; margin: 15px 0; }
        .row-card { padding: 15px; min-height: 90px; }
        .name { font-size: 20px; }
    }
  </style>
</head>
<body>

<div class="container" id="login-section">
  <div id="login-box">
    <div class="school-header">載入中...</div>
    <div class="login-title">接待處登入</div>
    <input type="password" id="pwd" class="form-control input-custom" placeholder="請輸入接待密碼">
    <button onclick="manualLogin()" class="btn btn-login">進入系統</button>
  </div>
</div>

<div class="container" id="main-app">
  <div class="school-header" id="school-header-main" style="text-align: center; margin-top:20px;"></div>
  <h1 id="event-header" class="event-main-title
